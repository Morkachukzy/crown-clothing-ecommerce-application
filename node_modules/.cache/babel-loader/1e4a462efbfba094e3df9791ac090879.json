{"ast":null,"code":"var _jsxFileName = \"/Users/Chuka/Documents/Learn/React/CapstoneProject/crown-clothing-ecommerce-application/src/contexts/user.context.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useReducer } from \"react\";\nimport { createUserProfileDocument, onAuthStateChangedListener } from \"../utils/firebase/firebase.utils\";\nimport { createAction } from \"../utils/reducer/reducer.utils\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const UserContext = /*#__PURE__*/createContext({\n  currentUser: null,\n  setCurrentUser: () => null\n});\nexport const USER_ACTION_TYPES = {\n  SET_CURRENT_USER: \"SET_CURRENT_USER \"\n};\nconst INITIAL_STATE = {\n  currentUser: null\n};\n\nconst init = _ref => {\n  let {\n    currentUser\n  } = _ref;\n  return {\n    currentUser\n  };\n};\n\nconst userReducer = (state, action) => {\n  const {\n    type,\n    payload\n  } = action;\n\n  switch (type) {\n    case USER_ACTION_TYPES.SET_CURRENT_USER:\n      return { ...state,\n        currentUser: payload\n      };\n\n    default:\n      throw new Error(`Unhandled type ${type} in userReducer`);\n  }\n};\n\nexport const UserProvider = _ref2 => {\n  _s();\n\n  let {\n    children\n  } = _ref2;\n  const [{\n    currentUser\n  }, dispatch] = useReducer(userReducer, INITIAL_STATE, init);\n\n  const setCurrentUser = user => dispatch(createAction(USER_ACTION_TYPES.SET_CURRENT_USER, user));\n\n  const value = {\n    currentUser,\n    setCurrentUser\n  };\n  useEffect(() => {\n    (async () => {\n      return onAuthStateChangedListener(user => {\n        if (user) {\n          createUserProfileDocument(user);\n        }\n\n        setCurrentUser(user);\n      });\n    })();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 10\n  }, this);\n};\n\n_s(UserProvider, \"gtlX1S0uNmKlucjJl00QsnceMbM=\");\n\n_c = UserProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"names":["createContext","useEffect","useReducer","createUserProfileDocument","onAuthStateChangedListener","createAction","UserContext","currentUser","setCurrentUser","USER_ACTION_TYPES","SET_CURRENT_USER","INITIAL_STATE","init","userReducer","state","action","type","payload","Error","UserProvider","children","dispatch","user","value"],"sources":["/Users/Chuka/Documents/Learn/React/CapstoneProject/crown-clothing-ecommerce-application/src/contexts/user.context.jsx"],"sourcesContent":["import {createContext, useEffect, useReducer} from \"react\";\n\nimport {createUserProfileDocument, onAuthStateChangedListener,} from \"../utils/firebase/firebase.utils\";\n\nimport {createAction} from \"../utils/reducer/reducer.utils\";\n\nexport const UserContext = createContext({\n  currentUser: null,\n  setCurrentUser: () => null,\n});\n\nexport const USER_ACTION_TYPES = {\n  SET_CURRENT_USER: \"SET_CURRENT_USER \"\n}\n\nconst INITIAL_STATE = {\n  currentUser: null\n}\n\n\nconst init = ({currentUser}) => ({\n  currentUser\n})\n\nconst userReducer = (state, action) => {\n  const {type, payload} = action;\n\n  switch (type) {\n    case USER_ACTION_TYPES.SET_CURRENT_USER:\n      return {\n        ...state,\n        currentUser: payload\n      }\n    default:\n      throw new Error(`Unhandled type ${type} in userReducer`)\n  }\n}\n\nexport const UserProvider = ({children}) => { \n  const [{currentUser}, dispatch] = useReducer(userReducer, INITIAL_STATE, init)\n  const setCurrentUser = (user) => dispatch(createAction(USER_ACTION_TYPES.SET_CURRENT_USER, user))\n  const value = {currentUser, setCurrentUser};\n\n  useEffect(() => {\n    (async () => {\n      return onAuthStateChangedListener((user) => {\n        if (user) {\n          createUserProfileDocument(user);\n        }\n        setCurrentUser(user);\n      });\n    })();\n  }, []);\n\n  return <UserContext.Provider value={value}>{children}</UserContext.Provider>;\n};\n"],"mappings":";;;AAAA,SAAQA,aAAR,EAAuBC,SAAvB,EAAkCC,UAAlC,QAAmD,OAAnD;AAEA,SAAQC,yBAAR,EAAmCC,0BAAnC,QAAqE,kCAArE;AAEA,SAAQC,YAAR,QAA2B,gCAA3B;;AAEA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC;EACvCO,WAAW,EAAE,IAD0B;EAEvCC,cAAc,EAAE,MAAM;AAFiB,CAAD,CAAjC;AAKP,OAAO,MAAMC,iBAAiB,GAAG;EAC/BC,gBAAgB,EAAE;AADa,CAA1B;AAIP,MAAMC,aAAa,GAAG;EACpBJ,WAAW,EAAE;AADO,CAAtB;;AAKA,MAAMK,IAAI,GAAG;EAAA,IAAC;IAACL;EAAD,CAAD;EAAA,OAAoB;IAC/BA;EAD+B,CAApB;AAAA,CAAb;;AAIA,MAAMM,WAAW,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;EACrC,MAAM;IAACC,IAAD;IAAOC;EAAP,IAAkBF,MAAxB;;EAEA,QAAQC,IAAR;IACE,KAAKP,iBAAiB,CAACC,gBAAvB;MACE,OAAO,EACL,GAAGI,KADE;QAELP,WAAW,EAAEU;MAFR,CAAP;;IAIF;MACE,MAAM,IAAIC,KAAJ,CAAW,kBAAiBF,IAAK,iBAAjC,CAAN;EAPJ;AASD,CAZD;;AAcA,OAAO,MAAMG,YAAY,GAAG,SAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;EAC1C,MAAM,CAAC;IAACb;EAAD,CAAD,EAAgBc,QAAhB,IAA4BnB,UAAU,CAACW,WAAD,EAAcF,aAAd,EAA6BC,IAA7B,CAA5C;;EACA,MAAMJ,cAAc,GAAIc,IAAD,IAAUD,QAAQ,CAAChB,YAAY,CAACI,iBAAiB,CAACC,gBAAnB,EAAqCY,IAArC,CAAb,CAAzC;;EACA,MAAMC,KAAK,GAAG;IAAChB,WAAD;IAAcC;EAAd,CAAd;EAEAP,SAAS,CAAC,MAAM;IACd,CAAC,YAAY;MACX,OAAOG,0BAA0B,CAAEkB,IAAD,IAAU;QAC1C,IAAIA,IAAJ,EAAU;UACRnB,yBAAyB,CAACmB,IAAD,CAAzB;QACD;;QACDd,cAAc,CAACc,IAAD,CAAd;MACD,CALgC,CAAjC;IAMD,CAPD;EAQD,CATQ,EASN,EATM,CAAT;EAWA,oBAAO,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAEC,KAA7B;IAAA,UAAqCH;EAArC;IAAA;IAAA;IAAA;EAAA,QAAP;AACD,CAjBM;;GAAMD,Y;;KAAAA,Y"},"metadata":{},"sourceType":"module"}